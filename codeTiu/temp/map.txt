<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.skynet.dao.<%= table.name %>Dao">

	<resultMap id="BaseResultMap" type="com.skynet.entity.<%= table.name %>">    
    <% table.columns.forEach(function(column){ %>
		<id column="<%= column.name %>" property="<%= column.camel_name %>" jdbcType="<%= column.type %>" />  
    <% }); %>
	</resultMap>
	<sql id="Base_Column_List">
        <% table.columns.forEach(function(column){ %>
              <%= column.name %>,
        <% }); %>
	</sql>
	<select id="findAll" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from <%= table.table_name %>  
	</select>
	<!-- 通过关键字查 -->
	<select id="findByPrimaryKey" parameterType="String" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from <%= table.table_name %> 
		where UD = #{UD}
	</select>
	<!-- 不分页查询 -->
	<select id="findByCondition" parameterType="java.util.Map"resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from hos_sms_channels
		where 1=1
	  	<% table.columns.forEach(function(column){ %>
		<if test="searchParams.<%= column.camel_name %>!=null and searchParams.<%= column.camel_name %>!=''">
			AND <%= column.name %> = #{searchParams.<%= column.camel_name %>}
		</if>
		<% }); %>
	</select>

	<!-- 分页查询 -->
	<select id="findByPage" parameterType="com.skynet.common.SearchParams"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from hos_sms_channels
		where 1=1		
    <% table.columns.forEach(function(column){ %>
		<if test="searchParams.<%= column.camel_name %>!=null and searchParams.<%= column.camel_name %>!=''">
			AND <%= column.name %> = #{searchParams.<%= column.camel_name %>}
		</if>
	<% }); %>	 
		 
	</select>

	<insert id="insert" parameterType="com.skynet.entity.<%=table.name %>">
		insert into hos_sms_channels
		<trim prefix="(" suffix=")" suffixOverrides=",">			
		<% table.columns.forEach(function(column){ %> 
			<if test="<%= column.camel_name %>!=null and <%= column.camel_name %>!=''">
			<%= column.name %>,
			</if>
		<% }); %>	 
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=","> 
			<% table.columns.forEach(function(column){ %> 
		    <if test="<%=column.camel_name %>!=null and <%= column.camel_name %>!=''">
				#{<%= column.camel_name %>,jdbcType=<%= column.type %>},
				<%= column.name %>,
		    </if>
			<% }); %>
			
		</trim>
	</insert>

	<delete id="delete" parameterType="com.skynet.entity.<%=table.name %>">
		delete from <%= table.table_name %>
		where <%= table.pk %> = #{<%=table.pkCamel %>,jdbcType=STRING}
	</delete>

	<update id="update" parameterType="com.skynet.entity.<%=table.name %>">
		update hos_sms_channels
		<set>
			<% table.columns.forEach(function(column){ %> 
			<if test="<%=column.camel_name %>!=null">
			<%= column.name %>= #{<%=column.camel_name %>,jdbcType=<%=column.type %>},
			</if>
			<% }); %>	 
		</set>
		where  SPH_ID = #{sphId,jdbcType=VARCHAR}
	</update>

	<insert id="insertBatch" parameterType="java.util.List">
		insert into hos_sms_channels (<include refid="Base_Column_List" />)
		values
		<foreach collection="list" item="item" index="index" separator=",">
			(<% table.columns.forEach(function(column){ %>
			#{item.<%=column.camel_name %>,jdbcType=<%=column.type%>}, <% }); %>	
			)
		</foreach>
	</insert>

</mapper>
